---
import '../styles/global.css';
import '../styles/index.css';
import { pwaInfo } from 'virtual:pwa-info';
---

<!DOCTYPE html>
<html lang="ta">
  <!-- Blocking script in the head to prevent flash -->
  <script is:inline>
    // Check theme preference and apply it immediately
    const savedTheme = localStorage.getItem('theme');
    const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
      document.documentElement.classList.add('dark');
    }
  </script>

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Favicon and App Icons -->
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/pwa-192x192.png" />
    <link rel="mask-icon" href="/favicon.svg" color="#6366F1" />
    
    <!-- Theme Colors -->
    <meta name="msapplication-TileColor" content="#6366F1" />
    <meta name="theme-color" content="#6366F1" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="#1F2937" media="(prefers-color-scheme: dark)" />
    
    <!-- SEO Meta Tags -->
    <title>Page Not Found | Tamil Christian Songs</title>
    <meta name="description" content="Page not found. Return to Tamil Christian Songs collection with translations in English and German." />
    
    <!-- PWA Related -->
    <script src="/src/pwa.ts"></script>
    { pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} /> }
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@100..900&display=swap" rel="stylesheet" />
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  </head>
  
  <body class="bg-gradient-to-b from-indigo-50/50 to-white dark:from-gray-900 dark:to-gray-800 min-h-screen font-tamil dark:text-gray-200 transition-colors duration-200">
    <!-- Outer container -->
    <div class="max-w-6xl mx-auto px-4 py-6 sm:py-8 flex flex-col min-h-screen">
      <!-- Header with simplified design -->
      <div class="text-center mb-8 sm:mb-10 relative">
        <h1 class="mb-3 text-2xl sm:text-3xl md:text-4xl font-bold text-indigo-700 dark:text-indigo-400 leading-snug">
          Tamil Christian Songs
        </h1>
        <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto text-sm sm:text-base">
          A collection of beautiful Tamil Christian songs with translations in English and German
        </p>
      </div>

      <!-- 404 Content -->
      <div class="flex-grow flex flex-col items-center justify-center text-center px-4 py-8">
        <div class="w-full max-w-md bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 shadow-md p-6 sm:p-8">
          <!-- 404 Icon/Illustration -->
          <div class="mb-6">
            <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-24 w-24 text-indigo-400 dark:text-indigo-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          
          <!-- Error Message -->
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">404</h2>
          <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4">Page Not Found</h3>
          <p class="text-gray-600 dark:text-gray-400 mb-6">
            The page you're looking for doesn't exist or has been moved.
          </p>
          
          <!-- Navigation Options -->
          <div class="flex flex-col sm:flex-row gap-3 justify-center">
            <a href="/" class="inline-flex items-center justify-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors duration-200 font-medium">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7m-7-7v14" />
              </svg>
              Back to Home
            </a>
            <button 
              onclick="window.history.back()" 
              class="inline-flex items-center justify-center px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg transition-colors duration-200 font-medium"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
              </svg>
              Go Back
            </button>
          </div>
        </div>
      </div>
      
      <!-- Footer with improved styling to match -->
      <footer class="py-6 sm:py-8 px-4 max-w-6xl mx-auto mt-auto">
        <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 shadow-sm p-4 sm:p-6">
          <div class="flex flex-col md:flex-row justify-between items-center gap-4">
            <!-- Theme Toggle -->
            <div class="flex items-center">
              <button 
                id="theme-toggle" 
                class="p-2 sm:p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300 dark:focus:ring-indigo-500 text-gray-700 dark:text-gray-200 transition-all duration-200 flex items-center gap-2"
                aria-label="Toggle dark mode"
              >
                <!-- Sun icon (shown in dark mode) -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500 sun-icon hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <!-- Moon icon (shown in light mode) -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-600 moon-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
                <span class="text-sm font-medium">Switch Theme</span>
              </button>
            </div>
            
            <!-- Copyright -->
            <div class="text-center text-gray-600 dark:text-gray-400 text-sm">
              <p>Â© 2025 Tamil Christian Songs | All Rights Reserved</p>
            </div>
            
            <!-- Social Links -->
            <div class="flex items-center gap-4">
              <a href="https://github.com/Sujant-h/songbook" class="text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700">
                <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd" />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <script>
      // Theme toggle functionality
      document.addEventListener('DOMContentLoaded', () => {
        // Check for saved theme preference or use the system preference
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        // Apply the theme based on saved preference or system preference
        if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
        
        // Update the toggle button's state
        updateToggleState();
        
        // Add event listener to the theme toggle button
        const themeToggle = document.getElementById('theme-toggle');
        if (themeToggle) {
          themeToggle.addEventListener('click', () => {
            // Toggle the dark class on the html element
            document.documentElement.classList.toggle('dark');
            
            // Save the current preference to localStorage
            const isDark = document.documentElement.classList.contains('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            
            // Update the toggle button's state
            updateToggleState();
          });
        }
      });
      
      // Update the toggle button to reflect the current theme
      function updateToggleState() {
        const themeToggle = document.getElementById('theme-toggle');
        const isDark = document.documentElement.classList.contains('dark');
        
        if (themeToggle) {
          const sunIcon = themeToggle.querySelector('.sun-icon');
          const moonIcon = themeToggle.querySelector('.moon-icon');
          
          if (sunIcon && moonIcon) {
            if (isDark) {
              sunIcon.classList.remove('hidden');
              moonIcon.classList.add('hidden');
            } else {
              sunIcon.classList.add('hidden');
              moonIcon.classList.remove('hidden');
            }
          }
        }
      }
    </script>
  </body>
</html>